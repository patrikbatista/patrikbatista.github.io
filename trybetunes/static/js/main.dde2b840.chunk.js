(this.webpackJsonptrybetunes=this.webpackJsonptrybetunes||[]).push([[0],{69:function(e,t,n){},71:function(e,t,n){},82:function(e,t,n){},84:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),c=n(27),s=n.n(c),i=(n(69),n(7)),o=n(8),l=n(11),u=n(10),h=n(42),j=n(12),d=n(6),b=n(21),m=n(86),O=n(91),x=n(87),p=n(2),f="user",v=function(e){return localStorage.setItem(f,JSON.stringify(e))},g=function(e){return function(t){setTimeout((function(){t(e)}),1500)}},y=function(){return new Promise((function(e){var t=JSON.parse(localStorage.getItem(f));null===t&&(t={}),g(t)(e)}))},k=n(1),C=function(e){Object(l.a)(n,e);var t=Object(u.a)(n);function n(){return Object(i.a)(this,n),t.apply(this,arguments)}return Object(o.a)(n,[{key:"render",value:function(){return Object(k.jsx)("div",{children:Object(k.jsx)("h3",{children:"Carregando..."})})}}]),n}(r.a.Component),N=C,S=n.p+"static/media/trybe-tunes.121ac777.svg",I=(n(71),function(e){Object(l.a)(n,e);var t=Object(u.a)(n);function n(e){var a;return Object(i.a)(this,n),(a=t.call(this,e)).handleChangeInput=a.handleChangeInput.bind(Object(b.a)(a)),a.handleChangeButton=a.handleChangeButton.bind(Object(b.a)(a)),a.state={name:"",loading:!1,logIn:!1},a}return Object(o.a)(n,[{key:"handleChangeInput",value:function(e){var t=e.target;this.setState(Object(d.a)({},t.name,t.value))}},{key:"handleChangeButton",value:function(){var e=this,t=this.state.name;this.setState({loading:!0}),function(e){return new Promise((function(t){v(Object(p.a)(Object(p.a)({},{name:"",email:"",image:"",description:""}),e)),g("OK")(t)}))}({name:t}).then((function(){return e.setState({loading:!1,logIn:!0})}))}},{key:"render",value:function(){var e=this.state,t=e.name,n=e.loading,a=e.logIn;return Object(k.jsxs)("div",{children:[Object(k.jsxs)("div",{children:[!1===n?null:Object(k.jsx)(N,{}),a?Object(k.jsx)(j.a,{to:"/search"}):null]}),Object(k.jsx)(m.a,{"data-testid":"page-login",className:"container-login ",children:Object(k.jsxs)(O.a,{action:"",className:"formulario",children:[Object(k.jsx)("div",{children:Object(k.jsx)("img",{src:S,width:"90",height:"90",alt:"trybeTunes logo"})}),Object(k.jsx)(O.a.Label,{htmlFor:"inputText",children:Object(k.jsx)(O.a.Control,{className:"input",size:"sm","data-testid":"login-name-input",type:"text",value:t,name:"name",onChange:this.handleChangeInput})}),Object(k.jsx)(x.a,{className:"button",size:"sm",variant:"success",type:"button","data-testid":"login-submit-button",onClick:this.handleChangeButton,disabled:t.length<3,children:"Entrar"})]})})]})}}]),n}(r.a.Component)),w=n(89),B=n(63),T=n(93),A=n(90),P=n(92),z=n(88),D=n.p+"static/media/default-avatar.a14020e2.svg",J=function(e){Object(l.a)(n,e);var t=Object(u.a)(n);function n(e){var a;return Object(i.a)(this,n),(a=t.call(this,e)).state={user:{},loading:!0},a}return Object(o.a)(n,[{key:"componentDidMount",value:function(){var e=this;y().then((function(t){e.setState({user:t,loading:!1})}))}},{key:"render",value:function(){var e=this.state,t=e.user,n=e.loading,a=this.props.history,r=t.name;return console.log(t.name),Object(k.jsxs)("header",{className:"sticky-top",children:[n?Object(k.jsx)(N,{}):null,Object(k.jsx)(A.a,{bg:"dark",variant:"dark",children:Object(k.jsxs)(m.a,{fluid:!0,children:[Object(k.jsx)(A.a.Brand,{children:Object(k.jsx)("img",{onClick:function(){return a.push("/")},src:S,width:"50",height:"50",alt:"trybeTunes logo"})}),Object(k.jsx)(A.a.Toggle,{"aria-controls":"navbarScroll"}),Object(k.jsxs)(A.a.Collapse,{id:"navbarScroll",children:[Object(k.jsx)(P.a,{className:"me-auto my-2 my-lg-0",style:{maxHeight:"100px"},navbarScroll:!0}),Object(k.jsxs)(z.a,{pill:!0,bg:"light",text:"dark",children:[Object(k.jsx)("img",{src:D,width:"20",height:"20",alt:"avatar logo"}),r]})]})]})}),Object(k.jsx)(A.a,{bg:"dark",children:Object(k.jsxs)(m.a,{fluid:!0,children:[Object(k.jsx)(A.a.Toggle,{"aria-controls":"navbarScroll"}),Object(k.jsxs)(A.a.Collapse,{id:"navbarScroll",children:[Object(k.jsx)(P.a,{className:"me-auto my-2 my-lg-0",style:{maxHeight:"100px"},navbarScroll:!0}),Object(k.jsxs)("div",{className:"d-flex flex-fill",children:[Object(k.jsx)(x.a,{className:"p-2 flex-fill",size:"sm",variant:"outline-success",onClick:function(){return a.push("/search")},children:"Pesquisar"}),Object(k.jsx)(x.a,{className:"p-2 flex-fill",size:"sm",variant:"outline-success",onClick:function(){return a.push("/favorites")},children:"Favoritos"}),Object(k.jsx)(x.a,{className:"p-2 flex-fill",size:"sm",variant:"outline-success",onClick:function(){return a.push("/profile")},children:"Perfil"})]})]})]})})]})}}]),n}(r.a.Component),U=n(40),F=n.n(U),H=n(52),M=function(){var e=Object(H.a)(F.a.mark((function e(t){var n,a,r,c,s,i;return F.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=encodeURI(t).replaceAll("%20","+"),a="https://itunes.apple.com/search?entity=album&term=".concat(n,"&attribute=allArtistTerm"),e.next=4,fetch(a);case 4:return r=e.sent,e.next=7,r.json();case 7:return c=e.sent,s=c.results,i=s.map((function(e){return{artistId:e.artistId,artistName:e.artistName,collectionId:e.collectionId,collectionName:e.collectionName,collectionPrice:e.collectionPrice,artworkUrl100:e.artworkUrl100,releaseDate:e.releaseDate,trackCount:e.trackCount}})),e.abrupt("return",i);case 11:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),K=M,q=(n(82),function(e){Object(l.a)(n,e);var t=Object(u.a)(n);function n(e){var a;return Object(i.a)(this,n),(a=t.call(this,e)).state={nameSearch:"",album:"",loading:!1,apiDone:!1},a.handleChangeSearch=a.handleChangeSearch.bind(Object(b.a)(a)),a.handleChangeButton=a.handleChangeButton.bind(Object(b.a)(a)),a.createInput=a.createInput.bind(Object(b.a)(a)),a.createAlbumCard=a.createAlbumCard.bind(Object(b.a)(a)),a}return Object(o.a)(n,[{key:"handleChangeSearch",value:function(e){var t=e.target;this.setState(Object(d.a)({},t.name,t.value))}},{key:"handleChangeButton",value:function(){var e=this,t=this.state.nameSearch;this.setState({loading:!0,apiDone:!1}),K(t).then((function(n){null!==n&&(e.nameArtist=t,e.setState({nameSearch:"",album:n,loading:!1,apiDone:!0}))}))}},{key:"createInput",value:function(e){return Object(k.jsx)("div",{className:"mt-3 text-center",children:Object(k.jsxs)(O.a,{className:"row d-flex justify-content-center",children:[Object(k.jsx)(O.a.Label,{htmlFor:"input-artist",children:Object(k.jsx)(O.a.Control,{size:"sm",type:"text",name:"nameSearch",value:e,onChange:this.handleChangeSearch})}),Object(k.jsx)(x.a,{size:"sm",variant:"success",type:"button","data-testid":"search-artist-button",disabled:e.length<2,onClick:this.handleChangeButton,children:"Pesquisar"})]})})}},{key:"createAlbumCard",value:function(e){var t=this.state.apiDone;return e.length>0?Object(k.jsxs)("div",{children:[Object(k.jsx)("h3",{className:"text-center",children:"Resultado de \xe1lbuns de: ".concat(this.nameArtist)}),Object(k.jsx)(w.a,{xs:1,md:"auto",className:"g-4 justify-content-center",children:e.map((function(e){var t=e.artistName,n=e.collectionId,a=e.collectionName,r=e.artworkUrl100;return Object(k.jsx)(B.a,{children:Object(k.jsxs)(T.a,{style:{width:"18rem"},children:[Object(k.jsx)(h.b,{to:"/album/".concat(n),children:Object(k.jsx)("div",{className:"bg-image hover-overlay hover-zoom hover-shadow ripple",children:Object(k.jsx)(T.a.Img,{className:"w-100",variant:"top","data-testid":"link-to-album-".concat(n),src:r,alt:"Capa do \xe1lbum"})})}),Object(k.jsxs)(T.a.Body,{children:[Object(k.jsx)(T.a.Title,{children:t}),Object(k.jsx)(T.a.Text,{children:a})]}),Object(k.jsx)(T.a.Body,{})]})},n)}))})]}):!0===t?Object(k.jsx)("h3",{children:"Nenhum \xe1lbum foi encontrado"}):void 0}},{key:"render",value:function(){var e=this.state,t=e.nameSearch,n=e.album,a=e.loading,r=this.props.history;return Object(k.jsxs)("div",{"data-testid":"page-search",children:[Object(k.jsx)(J,{history:r}),a?Object(k.jsx)(N,{}):this.createInput(t),this.createAlbumCard(n)]})}}]),n}(r.a.Component)),E=function(e){Object(l.a)(n,e);var t=Object(u.a)(n);function n(){return Object(i.a)(this,n),t.apply(this,arguments)}return Object(o.a)(n,[{key:"render",value:function(){var e=this.props,t=e.song,n=e.handleCheckBox,a=e.checked,r=t.trackName,c=t.previewUrl,s=t.trackNumber,i=t.trackId;return Object(k.jsxs)(T.a,{className:"text-center",children:[Object(k.jsx)(T.a.Header,{children:Object(k.jsx)(z.a,{pill:!0,children:s})}),Object(k.jsxs)(T.a.Body,{children:[Object(k.jsx)(T.a.Title,{children:r}),Object(k.jsxs)("audio",{"data-testid":"audio-component",src:c,controls:!0,children:[Object(k.jsx)("track",{kind:"captions"}),"O seu navegador n\xe3o suporta o elemento",Object(k.jsx)("code",{children:"audio"}),"."]})]}),Object(k.jsx)(T.a.Footer,{className:"text-muted",children:Object(k.jsxs)("label",{htmlFor:"labelFavorite",children:["Favorita",Object(k.jsx)("input",{"data-testid":"checkbox-music-".concat(i),name:i,type:"checkbox",onChange:n,checked:a})]})})]})}}]),n}(a.Component),L=E,R=function(){var e=Object(H.a)(F.a.mark((function e(t){var n,a;return F.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("https://itunes.apple.com/lookup?id=".concat(t,"&entity=song"));case 2:return n=e.sent,e.next=5,n.json();case 5:return a=e.sent,e.abrupt("return",a.results);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),W=R,_=n(53),G="favorite_songs";JSON.parse(localStorage.getItem(G))||localStorage.setItem(G,JSON.stringify([]));var Q=function(){return JSON.parse(localStorage.getItem(G))},V=function(e){return localStorage.setItem(G,JSON.stringify(e))},X=function(e){return function(t){setTimeout((function(){t(e)}),500)}},Y=function(){return new Promise((function(e){var t=Q();X(t)(e)}))},Z=function(e){Object(l.a)(n,e);var t=Object(u.a)(n);function n(e){var a;return Object(i.a)(this,n),(a=t.call(this,e)).state={songs:[],albumCover:"",loading:!1,checked:[]},a.handleCheckBox=a.handleCheckBox.bind(Object(b.a)(a)),a.renderAlbum=a.renderAlbum.bind(Object(b.a)(a)),a}return Object(o.a)(n,[{key:"componentDidMount",value:function(){var e=this,t=this.props.match.params.id;console.log(t),W(t).then((function(t){var n=t[0],a=t.slice(1);Y().then((function(t){var r=a.map((function(e){var n=e.trackId;return t.some((function(e){return e.trackId===n}))}));e.setState({songs:a,albumCover:n,checked:r})}))}))}},{key:"handleCheckBox",value:function(e){var t,n=this,a=e.target.name,r=this.state,c=r.songs,s=r.checked,i=c.findIndex((function(e){return e.trackId===Number(a)})),o=c.find((function(e){return Number(a)===e.trackId}));this.setState({loading:!0}),!0===s[i]?(s[i]=!1,(t=o,new Promise((function(e){var n=Q();V(n.filter((function(e){return e.trackId!==t.trackId}))),X("OK")(e)}))).then((function(){return n.setState({loading:!1,checked:s})}))):(s[i]=!0,function(e){return new Promise((function(t){if(e){var n=Q();V([].concat(Object(_.a)(n),[e]))}X("OK")(t)}))}(o).then((function(){return n.setState({loading:!1,checked:s})})))}},{key:"renderAlbum",value:function(){var e=this,t=this.state,n=t.albumCover,a=t.songs,r=t.checked,c=n.artistName,s=n.collectionName,i=n.artworkUrl100;return Object(k.jsxs)("div",{className:"mt-3 d-md-flex align-items-center justify-content-evenly",children:[Object(k.jsx)("div",{className:"d-flex align-items-center overflow-hidden",children:Object(k.jsxs)(T.a,{style:{width:"18rem"},children:[Object(k.jsx)("div",{className:"bg-image hover-overlay hover-zoom hover-shadow ripple",children:Object(k.jsx)(T.a.Img,{className:"w-100",variant:"top",src:i,alt:"Capa do \xe1lbum"})}),Object(k.jsxs)(T.a.Body,{children:[Object(k.jsx)(T.a.Title,{children:c}),Object(k.jsx)(T.a.Text,{children:s})]}),Object(k.jsx)(T.a.Body,{})]})}),Object(k.jsx)("div",{className:"overflow-auto p-3 mb-3 mb-md-0 mr-md-3 bg-light",style:{maxWidth:"auto",maxHeight:"80vh"},children:a.map((function(t,n){return Object(k.jsx)(L,{song:t,handleCheckBox:e.handleCheckBox,checked:r[n]},t.trackId)}))})]})}},{key:"render",value:function(){var e=this.state.loading,t=this.props.history;return Object(k.jsxs)("div",{"data-testid":"page-album",children:[Object(k.jsx)(J,{history:t}),e?Object(k.jsx)(N,{}):this.renderAlbum()]})}}]),n}(r.a.Component),$=n(54),ee=function(e){Object(l.a)(n,e);var t=Object(u.a)(n);function n(e){var a;return Object(i.a)(this,n),(a=t.call(this,e)).state={songs:[]},a}return Object(o.a)(n,[{key:"componentDidMount",value:function(){var e=this;Y().then((function(t){return e.setState({songs:t})}))}},{key:"render",value:function(){var e=this.state.songs,t=this.props.history;return Object(k.jsxs)("div",{"data-testid":"page-favorites",children:[Object(k.jsx)(J,{history:t}),Object(k.jsx)("div",{className:"w-50 mx-auto mt-3",children:Object(k.jsx)($.a,{fade:!0,children:e.map((function(e){return Object(k.jsxs)($.a.Item,{children:[Object(k.jsx)("img",{className:"d-block w-100",src:e.artworkUrl100,alt:e.artistName}),Object(k.jsxs)($.a.Caption,{children:[Object(k.jsx)("h2",{children:e.artistName}),Object(k.jsx)("h3",{children:e.trackName}),Object(k.jsxs)("audio",{src:e.previewUrl,controls:!0,children:[Object(k.jsx)("track",{kind:"captions"}),"O seu navegador n\xe3o suporta o elemento",Object(k.jsx)("code",{children:"audio"}),"."]})]})]},e.trackId)}))})})]})}}]),n}(r.a.Component),te=function(e){Object(l.a)(n,e);var t=Object(u.a)(n);function n(){return Object(i.a)(this,n),t.apply(this,arguments)}return Object(o.a)(n,[{key:"render",value:function(){var e=this.props.history;return Object(k.jsx)("div",{"data-testid":"page-profile",children:Object(k.jsx)(J,{history:e})})}}]),n}(r.a.Component),ne=te,ae=function(e){Object(l.a)(n,e);var t=Object(u.a)(n);function n(){return Object(i.a)(this,n),t.apply(this,arguments)}return Object(o.a)(n,[{key:"render",value:function(){var e=this.props.history;return Object(k.jsx)("div",{"data-testid":"page-profile-edit",children:Object(k.jsx)(J,{history:e})})}}]),n}(r.a.Component),re=ae,ce=function(e){Object(l.a)(n,e);var t=Object(u.a)(n);function n(){return Object(i.a)(this,n),t.apply(this,arguments)}return Object(o.a)(n,[{key:"render",value:function(){return Object(k.jsx)("div",{"data-testid":"page-not-found",children:Object(k.jsx)(J,{})})}}]),n}(r.a.Component),se=ce,ie=function(e){Object(l.a)(n,e);var t=Object(u.a)(n);function n(){return Object(i.a)(this,n),t.apply(this,arguments)}return Object(o.a)(n,[{key:"render",value:function(){return Object(k.jsxs)(j.d,{children:[Object(k.jsx)(j.b,{exact:!0,path:"/",component:I}),Object(k.jsx)(j.b,{path:"/search",render:function(e){var t=e.history;return Object(k.jsx)(q,{history:t})}}),Object(k.jsx)(j.b,{path:"/album/:id",render:function(e){var t=e.match,n=e.history;return Object(k.jsx)(Z,{match:t,history:n})}}),Object(k.jsx)(j.b,{path:"/favorites",render:function(e){var t=e.history;return Object(k.jsx)(ee,{history:t})}}),Object(k.jsx)(j.b,{exact:!0,path:"/profile",render:function(e){var t=e.history;return Object(k.jsx)(ne,{history:t})}}),Object(k.jsx)(j.b,{path:"/profile/edit",render:function(e){var t=e.history;return Object(k.jsx)(re,{history:t})}}),Object(k.jsx)(j.b,{component:se})]})}}]),n}(r.a.Component),oe=ie,le=function(e){Object(l.a)(n,e);var t=Object(u.a)(n);function n(){return Object(i.a)(this,n),t.apply(this,arguments)}return Object(o.a)(n,[{key:"render",value:function(){return Object(k.jsx)(h.a,{basename:"".concat("/trybetunes","/"),children:Object(k.jsx)(oe,{})})}}]),n}(r.a.Component),ue=le;n(83);s.a.render(Object(k.jsx)(r.a.StrictMode,{children:Object(k.jsx)(ue,{})}),document.getElementById("root"))}},[[84,1,2]]]);
//# sourceMappingURL=main.dde2b840.chunk.js.map